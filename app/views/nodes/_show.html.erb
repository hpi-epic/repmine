<div class="node" style="top: <%= node.y %>px;left: <%= node.x %>px;" id="node_<%=node.id%>" data-node-id="<%= node.id %>">
<%= form_for([pattern, node]) do |f| %>
  <%= f.hidden_field :x %>
  <%= f.hidden_field :y %>  
  <%= f.select(:rdf_type, type_select(type_hierarchy, node), :class => "classSelector") %>
  <%= link_to(fa_icon("sitemap"), "#", :onclick => "openComplexDialog('node_#{node.id}_modal')") %>&nbsp;|&nbsp; 
  <%= link_to(fa_icon("times-circle"), "#", :onclick => "deleteNode('node_#{node.id}')") %>  
<% end %>
</div>

<div id="node_<%= node.id%>_modal" class="modal hide node-modal">
  <table style="width: 100%;">
    <tr>
      <td style="padding-right: 15px;">
        <div id="node_<%= node.id%>_modal_tree">
        <%= render(
          :partial => "type_expressions/show",
          :locals => {:type_expression => node.type_expression, :type_hierarchy => type_hierarchy, :pattern => pattern, :node => node}) %>
        </div>
      </td>
      <td style="width: 100px; text-align: left">
        <%= link_to(
          fa_icon("arrow-circle-o-down", :text => "below"),
          "#",
          :onclick => "addTypeExpression('#{pattern_node_type_expression_add_below_path(pattern, node,"XXX")}',$('li.highlighted'),$('#node_#{node.id}_modal_tree'));"
        ) %><br />
        <%= link_to(
          fa_icon("arrow-circle-o-left", :text => "same level"),
          "#",
          :onclick => "addTypeExpression('#{pattern_node_type_expression_add_same_level_path(pattern, node,"XXX")}',$('li.highlighted'),$('#node_#{node.id}_modal_tree'));"
        ) %><br />
        <%= link_to(
          fa_icon("times-circle", :text => "delete"),
          "#",
          :onclick => "addTypeExpression('#{pattern_node_type_expression_delete_path(pattern, node,"XXX")}',$('li.highlighted'),$('#node_#{node.id}_modal_tree'));"
        ) %>
      </td>
    </tr>
  </table>
</div>